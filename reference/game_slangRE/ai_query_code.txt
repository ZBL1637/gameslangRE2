APIæä¾›å•†ï¼šDeepSeek
API Keyï¼šsk-c19e575e2b8045e5932bcce9f2e5e538
API URLï¼šhttps://api.deepseek.com/v1/chat/completions
æ¨¡å‹ï¼šdeepseek-chat

================================================================================
                    AIæ™ºèƒ½æŸ¥è¯¢åŠŸèƒ½ - å®Œæ•´ä»£ç 
                    æ¥æº: https://github.com/ZBL1637/game_slang_dic
================================================================================

================================================================================
ä¸€ã€HTMLç»“æ„éƒ¨åˆ†
================================================================================

<!-- ç¬¬äºŒä¸ªSection: AIæ™ºèƒ½æŸ¥è¯¢ -->
<div class="search-section" id="search-section">
    <div class="section-intro">
        <p data-i18n="ai.intro">æˆ‘ä»¬å¼•å…¥å‰æ²¿çš„å¤§è¯­è¨€æ¨¡å‹ä¸çŸ¥è¯†å›¾è°±æŠ€æœ¯ï¼Œæ„å»ºäº†æ–°ä¸€ä»£æ™ºèƒ½è¯­ä¹‰åˆ†æç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿèƒ½å¤Ÿæ·±åº¦è§£ææ¸¸æˆæœ¯è¯­çš„è¯­ä¹‰ç»“æ„ã€æƒ…æ„Ÿå€¾å‘åŠä½¿ç”¨åœºæ™¯ï¼Œå¹¶æ­ç¤ºå…¶èƒŒåçš„æ–‡åŒ–åŠ¨å› ä¸ç¤¾ç¾¤ç‰¹å¾ï¼Œä¸ºæ¸¸æˆå†…å®¹ä¼˜åŒ–ã€ç¤¾åŒºç²¾ç»†åŒ–è¿è¥åŠç©å®¶ä½“éªŒæå‡æä¾›æ•°æ®æ”¯æŒã€‚</p>
    </div>
    <div class="search-interface">
        <h3 class="search-title" data-i18n="ai.title">ğŸ¤– AIæ™ºèƒ½æŸ¥è¯¢</h3>
        <p class="search-subtitle" data-i18n="ai.subtitle">è¾“å…¥æ¸¸æˆæœ¯è¯­ï¼ŒAIä¸ºæ‚¨æä¾›è¯¦ç»†è§£é‡Šå’Œä½¿ç”¨åœºæ™¯</p>
        <div class="search-container">
            <input type="text" class="search-box" placeholder="è¯·è¾“å…¥æ¸¸æˆé»‘è¯ï¼Œå¦‚ï¼šèººå¹³ã€å·ç‹ã€å¼€é»‘..." id="searchInput" data-i18n-attr="placeholder:ai.placeholder">
            <button class="search-btn" id="searchBtn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                </svg>
            </button>
        </div>

        <!-- AIåŠ è½½åŠ¨ç”» -->
        <div class="ai-loading" id="aiLoading">
            <div class="ai-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            <p class="loading-text" data-i18n="ai.loading">AIæ­£åœ¨åˆ†æä¸­...</p>
            <div class="loading-progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>

        <!-- AIæŸ¥è¯¢ç»“æœ -->
        <div class="ai-results" id="aiResults"></div>

        <!-- çƒ­é—¨è¯æ±‡æ¨è -->
        <div class="popular-words" id="popularWords">
            <h4 class="popular-title" data-i18n="ai.popular">ğŸ”¥ çƒ­é—¨æ¨è</h4>
            <div class="popular-grid" id="popularGrid">
                <!-- åŠ¨æ€ç”Ÿæˆçš„çƒ­é—¨è¯æ±‡å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
        </div>
    </div>
</div>


================================================================================
äºŒã€CSSæ ·å¼éƒ¨åˆ†
================================================================================

/* ç¬¬äºŒä¸ªSection: AIæ™ºèƒ½æŸ¥è¯¢ */
.search-section {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 60px 20px;
    opacity: 0;
    transform: translateY(60px);
    transition: all 1s ease-out;
}

.search-section.animate-in {
    opacity: 1;
    transform: translateY(0);
}

.search-interface {
    width: 80%;
    max-width: 800px;
    text-align: center;
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.8s ease-out 0.2s;
}

.search-section.animate-in .search-interface {
    opacity: 1;
    transform: translateY(0);
}

.search-title {
    color: var(--primary-purple);
    font-size: 2.5rem;
    margin-bottom: 20px;
    text-shadow: 0 0 20px var(--primary-purple);
}

.search-subtitle {
    font-size: 18px;
    color: rgba(255, 255, 255, 0.8);
    text-align: center;
    margin-bottom: 40px;
    line-height: 1.6;
}

.search-container {
    position: relative;
    margin-bottom: 30px;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
}

.search-box {
    width: 100%;
    padding: 20px 60px 20px 25px;
    font-size: 18px;
    background: rgba(0, 0, 0, 0.8);
    border: 2px solid var(--primary-purple);
    border-radius: 50px;
    color: white;
    outline: none;
    transition: all 0.3s ease;
    box-shadow: 0 0 20px rgba(127, 0, 86, 0.2);
}

.search-box:focus {
    box-shadow: 0 0 30px rgba(127, 0, 86, 0.4);
    border-color: var(--light-purple);
}

.search-box::placeholder {
    color: rgba(255, 255, 255, 0.5);
}

.search-btn {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    width: 45px;
    height: 45px;
    background: linear-gradient(45deg, var(--primary-purple), var(--light-purple));
    border: none;
    border-radius: 50%;
    color: var(--white);
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 15px rgba(127, 0, 86, 0.3);
}

.search-btn:hover {
    transform: translateY(-50%) scale(1.05);
    box-shadow: 0 0 25px rgba(127, 0, 86, 0.5);
}

.search-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: translateY(-50%);
}

/* AIåŠ è½½åŠ¨ç”» */
.ai-loading {
    display: none;
    text-align: center;
    margin: 40px 0;
    padding: 30px;
    background: rgba(127, 0, 86, 0.05);
    border: 1px solid rgba(127, 0, 86, 0.2);
    border-radius: 20px;
}

.ai-spinner {
    position: relative;
    width: 80px;
    height: 80px;
    margin: 0 auto 20px;
}

.spinner-ring {
    position: absolute;
    width: 100%;
    height: 100%;
    border: 3px solid transparent;
    border-top: 3px solid var(--primary-purple);
    border-radius: 50%;
    animation: spin 1.5s linear infinite;
}

.spinner-ring:nth-child(2) {
    width: 60px;
    height: 60px;
    top: 10px;
    left: 10px;
    border-top-color: var(--light-purple);
    animation-duration: 1s;
    animation-direction: reverse;
}

.spinner-ring:nth-child(3) {
    width: 40px;
    height: 40px;
    top: 20px;
    left: 20px;
    border-top-color: var(--accent-pink);
    animation-duration: 0.8s;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.loading-text {
    color: var(--primary-purple);
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 15px;
    text-shadow: 0 0 10px var(--primary-purple);
}

.loading-progress {
    width: 100%;
    height: 4px;
    background: rgba(127, 0, 86, 0.2);
    border-radius: 2px;
    overflow: hidden;
}

.progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--primary-purple), var(--light-purple));
    border-radius: 2px;
    width: 0%;
    transition: width 0.3s ease;
    box-shadow: 0 0 10px var(--primary-purple);
}

/* AIæŸ¥è¯¢ç»“æœ */
.ai-results {
    margin-top: 30px;
    text-align: left;
}

.ai-result-container {
    background: rgba(127, 0, 86, 0.05);
    border: 1px solid rgba(127, 0, 86, 0.3);
    border-radius: 20px;
    padding: 30px;
    margin-bottom: 20px;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.5s ease;
}

.ai-result-container.show {
    opacity: 1;
    transform: translateY(0);
}

.ai-term-title {
    font-size: 28px;
    color: var(--primary-purple);
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    text-shadow: 0 0 10px var(--primary-purple);
}

.ai-term-icon {
    width: 30px;
    height: 30px;
    background: linear-gradient(45deg, var(--primary-purple), var(--light-purple));
    border-radius: 8px;
    margin-right: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--white);
    font-weight: bold;
}

.ai-definition {
    background: rgba(127, 0, 86, 0.1);
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 20px;
    border-left: 4px solid var(--primary-purple);
}

.ai-definition-title {
    font-weight: bold;
    color: var(--white);
    margin-bottom: 8px;
    font-size: 18px;
}

.ai-definition-text {
    line-height: 1.6;
    color: rgba(255, 255, 255, 0.9);
}

.ai-section {
    margin-bottom: 20px;
}

.ai-section-title {
    font-size: 18px;
    font-weight: bold;
    color: var(--white);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
}

.ai-section-icon {
    margin-right: 8px;
    opacity: 0.8;
}

.ai-section-content {
    background: rgba(0, 0, 0, 0.3);
    padding: 15px;
    border-radius: 8px;
    line-height: 1.6;
    color: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(127, 0, 86, 0.2);
}

.ai-examples {
    background: rgba(255, 255, 0, 0.1);
    border-left: 3px solid #ffff00;
}

.ai-error {
    background: rgba(255, 0, 0, 0.1);
    color: #ff6b6b;
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    border-left: 4px solid #ff6b6b;
}

/* çƒ­é—¨è¯æ±‡æ¨è */
.example-tag {
    background: rgba(127, 0, 86, 0.1);
    color: var(--primary-purple);
    padding: 8px 15px;
    border-radius: 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 1px solid rgba(127, 0, 86, 0.3);
    font-weight: 500;
    display: inline-block;
    margin: 5px;
}

.example-tag:hover {
    background: var(--primary-purple);
    color: var(--white);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(127, 0, 86, 0.3);
}

/* çƒ­é—¨è¯æ±‡æ ·å¼ */
.popular-words {
    margin-top: 30px;
    padding: 20px;
    border-radius: 15px;
    background: rgba(127, 0, 86, 0.08);
    backdrop-filter: blur(15px);
    border: 1px solid rgba(127, 0, 86, 0.2);
}

.popular-title {
    color: var(--primary-purple);
    font-size: 18px;
    margin-bottom: 15px;
    text-shadow: 0 0 10px var(--primary-purple);
}

.popular-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
}

.popular-item {
    padding: 15px;
    border-radius: 10px;
    background: rgba(127, 0, 86, 0.1);
    border: 1px solid rgba(127, 0, 86, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
}

.popular-item:hover {
    background: rgba(127, 0, 86, 0.2);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(127, 0, 86, 0.3);
}

.popular-term {
    color: var(--primary-purple);
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 8px;
}

.popular-definition {
    color: #ccc;
    font-size: 14px;
    line-height: 1.4;
}

.popular-game {
    color: #888;
    font-size: 12px;
    margin-top: 8px;
    font-style: italic;
}

/* AIæ™ºèƒ½æŸ¥è¯¢å“åº”å¼æ ·å¼ */
@media (max-width: 768px) {
    .search-section {
        padding: 40px 15px;
        min-height: auto;
    }
    
    .search-interface {
        width: 95%;
    }
    
    .search-title {
        font-size: 1.8rem;
    }
    
    .search-subtitle {
        font-size: 14px;
    }
    
    .search-box {
        padding: 15px 50px 15px 20px;
        font-size: 16px;
    }
    
    .search-btn {
        width: 40px;
        height: 40px;
    }
    
    .ai-result-container {
        padding: 20px;
    }
    
    .ai-term-title {
        font-size: 22px;
    }
    
    .popular-grid {
        grid-template-columns: 1fr;
    }
}


================================================================================
ä¸‰ã€JavaScriptä»£ç éƒ¨åˆ†
================================================================================

// AIæ™ºèƒ½æŸ¥è¯¢åŠŸèƒ½
const AI_API_KEY = 'sk-c19e575e2b8045e5932bcce9f2e5e538';  // DeepSeek API Key
const AI_API_URL = 'https://api.deepseek.com/v1/chat/completions';

// å·¥å…·å‡½æ•° - å®‰å…¨æŸ¥è¯¢é€‰æ‹©å™¨
const Utils = {
    safeQuerySelector: function(selector) {
        return document.querySelector(selector);
    }
};

function initAISearchFunction() {
    const searchInput = Utils.safeQuerySelector('#searchInput');
    const searchBtn = Utils.safeQuerySelector('#searchBtn');
    const aiLoading = Utils.safeQuerySelector('#aiLoading');
    const aiResults = Utils.safeQuerySelector('#aiResults');
    const popularWords = Utils.safeQuerySelector('#popularWords');
    const progressBar = Utils.safeQuerySelector('#progressBar');

    if (!searchInput || !searchBtn || !aiLoading || !aiResults) {
        console.warn('AI search elements not found');
        return;
    }

    // å›è½¦æœç´¢
    searchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            aiSearchTerm();
        }
    });

    // æœç´¢æŒ‰é’®ç‚¹å‡»
    searchBtn.addEventListener('click', aiSearchTerm);

    function showAILoading(show) {
        if (show) {
            aiLoading.style.display = 'block';
            aiResults.innerHTML = '';
            if (popularWords) popularWords.style.display = 'none';

            // è¿›åº¦æ¡åŠ¨ç”»
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 90) progress = 90;
                if (progressBar) progressBar.style.width = progress + '%';
            }, 200);

            // å­˜å‚¨intervalä»¥ä¾¿æ¸…é™¤
            aiLoading.progressInterval = progressInterval;
        } else {
            aiLoading.style.display = 'none';
            if (popularWords) popularWords.style.display = 'block';

            // æ¸…é™¤è¿›åº¦æ¡åŠ¨ç”»
            if (aiLoading.progressInterval) {
                clearInterval(aiLoading.progressInterval);
                if (progressBar) progressBar.style.width = '100%';
                setTimeout(() => {
                    if (progressBar) progressBar.style.width = '0%';
                }, 500);
            }
        }
    }

    function displayAIResult(data) {
        const synonymsText = data.synonyms && data.synonyms.length > 0
            ? data.synonyms.join('ã€')
            : 'æš‚æ— ';

        const html = `
            <div class="ai-result-container">
                <div class="ai-term-title">
                    <div class="ai-term-icon">ğŸ¯</div>
                    ${data.term}
                </div>

                <div class="ai-definition">
                    <div class="ai-definition-title">ğŸ“ å«ä¹‰è§£é‡Š</div>
                    <div class="ai-definition-text">${data.definition}</div>
                </div>

                <div class="ai-section">
                    <div class="ai-section-title">
                        <span class="ai-section-icon">ğŸ’¡</span>
                        ä½¿ç”¨åœºæ™¯
                    </div>
                    <div class="ai-section-content">${data.usage}</div>
                </div>

                <div class="ai-section">
                    <div class="ai-section-title">
                        <span class="ai-section-icon">ğŸ’¬</span>
                        ä½¿ç”¨ä¾‹å¥
                    </div>
                    <div class="ai-section-content ai-examples">
                        ${data.examples.map((example, index) =>
                            `${index + 1}. ${example}`
                        ).join('<br>')}
                    </div>
                </div>

                <div class="ai-section">
                    <div class="ai-section-title">
                        <span class="ai-section-icon">ğŸ®</span>
                        æ¸¸æˆèƒŒæ™¯
                    </div>
                    <div class="ai-section-content">${data.context}</div>
                </div>

                <div style="display: flex; gap: 20px; margin-top: 20px; flex-wrap: wrap;">
                    <div style="background: rgba(117, 42, 238, 0.1); padding: 10px 15px; border-radius: 8px; flex: 1; min-width: 120px; border: 1px solid rgba(117, 42, 238, 0.3);">
                        <strong style="color: var(--primary-green);">æµè¡Œç¨‹åº¦:</strong> <span style="color: rgba(255, 255, 255, 0.9);">${data.level}</span>
                    </div>
                    <div style="background: rgba(117, 42, 238, 0.1); padding: 10px 15px; border-radius: 8px; flex: 1; min-width: 120px; border: 1px solid rgba(117, 42, 238, 0.3);">
                        <strong style="color: var(--primary-green);">åŒä¹‰è¯:</strong> <span style="color: rgba(255, 255, 255, 0.9);">${synonymsText}</span>
                    </div>
                </div>
            </div>
        `;

        aiResults.innerHTML = html;

        // æ·»åŠ æ˜¾ç¤ºåŠ¨ç”»
        setTimeout(() => {
            const container = aiResults.querySelector('.ai-result-container');
            if (container) {
                container.classList.add('show');
            }
        }, 100);
    }

    function displayAIError(message) {
        const html = `
            <div class="ai-result-container show">
                <div class="ai-error">
                    âŒ ${message}
                </div>
            </div>
        `;
        aiResults.innerHTML = html;
    }
}

// æ ¹æ®è¯­è¨€æ„å»º AI æœç´¢æç¤ºè¯
function buildAISearchPrompt(query) {
    const isEnglish = (typeof i18n !== 'undefined' && i18n.getLang && i18n.getLang() === 'en');
    if (isEnglish) {
        return `You are an expert in gaming terminology. Explain the gaming slang "${query}" in English.
Reply with ONLY a valid JSON object (no extra text) using the exact schema below:

{
  "term": "${query}",
  "definition": "50â€“100 words, precise meaning",
  "usage": "30â€“60 words describing how and when it is used",
  "examples": [
    "Example sentence 1",
    "Example sentence 2",
    "Example sentence 3"
  ],
  "context": "20â€“40 words about game genres or communities",
  "level": "Common / Niche / Specific game",
  "synonyms": ["synonym1", "synonym2"]
}

Requirements:
- Answer strictly in English.
- Return only JSON with the above fields.
- If it is not gaming slang, clearly state this in "definition".
- Provide at least 2 example sentences.`;
    }

    // ä¸­æ–‡æç¤ºè¯ï¼ˆä¿æŒåŸæœ‰ç»“æ„ä¸çº¦æŸï¼‰
    return `è¯·è¯¦ç»†è§£é‡Šæ¸¸æˆé»‘è¯"${query}"çš„å«ä¹‰å’Œä½¿ç”¨åœºæ™¯ã€‚è¯·æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼å›å¤ï¼Œç¡®ä¿å›å¤æ˜¯æœ‰æ•ˆçš„JSONæ ¼å¼ï¼š

{
  "term": "${query}",
  "definition": "è¯¦ç»†å®šä¹‰ï¼ˆ50-100å­—ï¼‰",
  "usage": "ä½¿ç”¨åœºæ™¯å’Œæ–¹å¼ï¼ˆ30-60å­—ï¼‰",
  "examples": [
    "ä½¿ç”¨ä¾‹å¥1",
    "ä½¿ç”¨ä¾‹å¥2",
    "ä½¿ç”¨ä¾‹å¥3"
  ],
  "context": "å‡ºç°çš„æ¸¸æˆç±»å‹æˆ–ç¤¾åŒºèƒŒæ™¯ï¼ˆ20-40å­—ï¼‰",
  "level": "æµè¡Œç¨‹åº¦ï¼šé€šç”¨/å°ä¼—/ç‰¹å®šæ¸¸æˆ",
  "synonyms": ["åŒä¹‰è¯1", "åŒä¹‰è¯2"]
}

è¯·ç¡®ä¿ï¼š
1. å›å¤å¿…é¡»æ˜¯æœ‰æ•ˆçš„JSONæ ¼å¼
2. æ‰€æœ‰å­—æ®µéƒ½å¿…é¡»å¡«å†™
3. å¦‚æœè¯¥è¯ä¸æ˜¯æ¸¸æˆé»‘è¯ï¼Œè¯·åœ¨definitionä¸­è¯´æ˜
4. examplesæ•°ç»„è‡³å°‘åŒ…å«2ä¸ªä¾‹å¥`;
}

// AIæœç´¢å‡½æ•°
function aiSearchTerm(term = null) {
    const searchInput = Utils.safeQuerySelector('#searchInput');
    const searchBtn = Utils.safeQuerySelector('#searchBtn');
    const aiLoading = Utils.safeQuerySelector('#aiLoading');
    const aiResults = Utils.safeQuerySelector('#aiResults');
    const isEnglish = (typeof i18n !== 'undefined' && i18n.getLang && i18n.getLang() === 'en');

    const query = term || searchInput.value.trim();
    if (!query) {
        alert(isEnglish ? 'Please enter a gaming term' : 'è¯·è¾“å…¥è¦æŸ¥è¯¢çš„æ¸¸æˆé»‘è¯');
        return;
    }

    if (term) {
        searchInput.value = term;
    }

    // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
    if (aiLoading) {
        aiLoading.style.display = 'block';
        aiResults.innerHTML = '';

        // è¿›åº¦æ¡åŠ¨ç”»
        const progressBar = Utils.safeQuerySelector('#progressBar');
        let progress = 0;
        const progressInterval = setInterval(() => {
            progress += Math.random() * 15;
            if (progress > 90) progress = 90;
            if (progressBar) progressBar.style.width = progress + '%';
        }, 200);

        aiLoading.progressInterval = progressInterval;
    }

    if (searchBtn) searchBtn.disabled = true;

    const prompt = buildAISearchPrompt(query);

    fetch(AI_API_URL, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${AI_API_KEY}`
        },
        body: JSON.stringify({
            model: 'deepseek-chat',
            messages: [
                {
                    role: 'user',
                    content: prompt
                }
            ],
            temperature: 0.7,
            max_tokens: 1000
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.choices && data.choices[0]) {
            try {
                const content = data.choices[0].message.content;
                const jsonMatch = content.match(/\{[\s\S]*\}/);
                if (jsonMatch) {
                    const result = JSON.parse(jsonMatch[0]);
                    displayAIResult(result);
                } else {
                    throw new Error(isEnglish ? 'Unable to parse returned JSON' : 'æ— æ³•è§£æè¿”å›çš„JSONæ•°æ®');
                }
            } catch (e) {
                console.error('è§£æé”™è¯¯:', e);
                displayAIError(isEnglish ? 'Failed to parse response. Please retry.' : 'è§£æè¿”å›æ•°æ®æ—¶å‡ºé”™ï¼Œè¯·é‡è¯•');
            }
        } else {
            displayAIError(isEnglish ? 'Invalid API response format' : 'APIè¿”å›æ•°æ®æ ¼å¼é”™è¯¯');
        }
    })
    .catch(error => {
        console.error('è¯·æ±‚é”™è¯¯:', error);
        displayAIError(isEnglish ? 'Request failed. Check network or try again later.' : 'æŸ¥è¯¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•');
    })
    .finally(() => {
        // éšè—åŠ è½½åŠ¨ç”»
        if (aiLoading) {
            aiLoading.style.display = 'none';

            // æ¸…é™¤è¿›åº¦æ¡åŠ¨ç”»
            if (aiLoading.progressInterval) {
                clearInterval(aiLoading.progressInterval);
                const progressBar = Utils.safeQuerySelector('#progressBar');
                if (progressBar) {
                    progressBar.style.width = '100%';
                    setTimeout(() => {
                        progressBar.style.width = '0%';
                    }, 500);
                }
            }
        }

        if (searchBtn) searchBtn.disabled = false;
    });
}

// å…¨å±€æ˜¾ç¤ºAIç»“æœå‡½æ•°
function displayAIResult(data) {
    const aiResults = Utils.safeQuerySelector('#aiResults');
    if (!aiResults) return;
    const isEnglish = (typeof i18n !== 'undefined' && i18n.getLang && i18n.getLang() === 'en');

    const synonymsText = data.synonyms && data.synonyms.length > 0
        ? data.synonyms.join(isEnglish ? ', ' : 'ã€')
        : (isEnglish ? 'None' : 'æš‚æ— ');

    const labels = isEnglish ? {
        definition: 'ğŸ“ Definition',
        usage: 'Usage',
        examples: 'Examples',
        context: 'Game Context',
        level: 'Popularity',
        synonyms: 'Synonyms'
    } : {
        definition: 'ğŸ“ å«ä¹‰è§£é‡Š',
        usage: 'ä½¿ç”¨åœºæ™¯',
        examples: 'ä½¿ç”¨ä¾‹å¥',
        context: 'æ¸¸æˆèƒŒæ™¯',
        level: 'æµè¡Œç¨‹åº¦:',
        synonyms: 'åŒä¹‰è¯:'
    };

    const html = `
        <div class="ai-result-container">
            <div class="ai-term-title">
                <div class="ai-term-icon">ğŸ¯</div>
                ${data.term}
            </div>

            <div class="ai-definition">
                <div class="ai-definition-title">${labels.definition}</div>
                <div class="ai-definition-text">${data.definition}</div>
            </div>

            <div class="ai-section">
                <div class="ai-section-title">
                    <span class="ai-section-icon">ğŸ’¡</span>
                    ${labels.usage}
                </div>
                <div class="ai-section-content">${data.usage}</div>
            </div>

            <div class="ai-section">
                <div class="ai-section-title">
                    <span class="ai-section-icon">ğŸ’¬</span>
                    ${labels.examples}
                </div>
                <div class="ai-section-content ai-examples">
                    ${data.examples.map((example, index) =>
                        `${index + 1}. ${example}`
                    ).join('<br>')}
                </div>
            </div>

            <div class="ai-section">
                <div class="ai-section-title">
                    <span class="ai-section-icon">ğŸ®</span>
                    ${labels.context}
                </div>
                <div class="ai-section-content">${data.context}</div>
            </div>

            <div style="display: flex; gap: 20px; margin-top: 20px; flex-wrap: wrap;">
                <div style="background: rgba(117, 42, 238, 0.1); padding: 10px 15px; border-radius: 8px; flex: 1; min-width: 120px; border: 1px solid rgba(117, 42, 238, 0.3);">
                    <strong style="color: var(--primary-green);">${labels.level}</strong> <span style="color: rgba(255, 255, 255, 0.9);">${data.level}</span>
                </div>
                <div style="background: rgba(117, 42, 238, 0.1); padding: 10px 15px; border-radius: 8px; flex: 1; min-width: 120px; border: 1px solid rgba(117, 42, 238, 0.3);">
                    <strong style="color: var(--primary-green);">${labels.synonyms}</strong> <span style="color: rgba(255, 255, 255, 0.9);">${synonymsText}</span>
                </div>
            </div>
        </div>
    `;
    
    aiResults.innerHTML = html;
    
    // æ·»åŠ æ˜¾ç¤ºåŠ¨ç”»
    setTimeout(() => {
        const container = aiResults.querySelector('.ai-result-container');
        if (container) {
            container.classList.add('show');
        }
    }, 100);
}

// å…¨å±€æ˜¾ç¤ºAIé”™è¯¯å‡½æ•°
function displayAIError(message) {
    const aiResults = Utils.safeQuerySelector('#aiResults');
    if (!aiResults) return;
    
    const html = `
        <div class="ai-result-container show">
            <div class="ai-error">
                âŒ ${message}
            </div>
        </div>
    `;
    aiResults.innerHTML = html;
}

// åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
    initAISearchFunction(); // åˆå§‹åŒ–æœç´¢åŠŸèƒ½
});


================================================================================
å››ã€å›½é™…åŒ–æ–‡æœ¬ï¼ˆi18n.jsä¸­çš„ç›¸å…³éƒ¨åˆ†ï¼‰
================================================================================

// AIæŸ¥è¯¢ç›¸å…³çš„å›½é™…åŒ–æ–‡æœ¬
const aiI18n = {
    title: { zh: 'ğŸ¤– AIæ™ºèƒ½æŸ¥è¯¢', en: 'ğŸ¤– AI Semantic Search' },
    subtitle: { zh: 'è¾“å…¥æ¸¸æˆæœ¯è¯­ï¼ŒAIä¸ºæ‚¨æä¾›è¯¦ç»†è§£é‡Šå’Œä½¿ç”¨åœºæ™¯', en: 'Enter a gaming term; AI explains meaning and usage.' },
    loading: { zh: 'AIæ­£åœ¨åˆ†æä¸­...', en: 'AI is analyzing...' },
    placeholder: { zh: 'è¯·è¾“å…¥æ¸¸æˆé»‘è¯ï¼Œå¦‚ï¼šèººå¹³ã€å·ç‹ã€å¼€é»‘...', en: 'Enter gaming slang, e.g., GG, nerf, meta...' },
    popular: { zh: 'ğŸ”¥ çƒ­é—¨æ¨è', en: 'ğŸ”¥ Popular Terms' },
    intro: { 
        zh: 'æˆ‘ä»¬å¼•å…¥å‰æ²¿çš„å¤§è¯­è¨€æ¨¡å‹ä¸çŸ¥è¯†å›¾è°±æŠ€æœ¯ï¼Œæ„å»ºäº†æ–°ä¸€ä»£æ™ºèƒ½è¯­ä¹‰åˆ†æç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿèƒ½å¤Ÿæ·±åº¦è§£ææ¸¸æˆæœ¯è¯­çš„è¯­ä¹‰ç»“æ„ã€æƒ…æ„Ÿå€¾å‘åŠä½¿ç”¨åœºæ™¯ï¼Œå¹¶æ­ç¤ºå…¶èƒŒåçš„æ–‡åŒ–åŠ¨å› ä¸ç¤¾ç¾¤ç‰¹å¾ï¼Œä¸ºæ¸¸æˆå†…å®¹ä¼˜åŒ–ã€ç¤¾åŒºç²¾ç»†åŒ–è¿è¥åŠç©å®¶ä½“éªŒæå‡æä¾›æ•°æ®æ”¯æŒã€‚', 
        en: 'We leverage cutting-edge large language models and knowledge graph technology to build a next-generation intelligent semantic analysis system. This system deeply parses the semantic structure, sentiment, and usage context of gaming terms, revealing the cultural drivers and community characteristics behind them.' 
    }
};


================================================================================
äº”ã€CSSå˜é‡å®šä¹‰ï¼ˆéœ€è¦åœ¨é¡µé¢ä¸­å®šä¹‰ï¼‰
================================================================================

:root {
    --primary-purple: #7f0056;
    --light-purple: #a855f7;
    --accent-pink: #ec4899;
    --primary-green: #00ff88;
    --white: #ffffff;
}


================================================================================
ä½¿ç”¨è¯´æ˜
================================================================================

1. APIé…ç½®ï¼š
   - å½“å‰ä½¿ç”¨çš„æ˜¯ DeepSeek API
   - API Key: sk-c19e575e2b8045e5932bcce9f2e5e538
   - API URL: https://api.deepseek.com/v1/chat/completions
   - æ¨¡å‹: deepseek-chat

2. å¦‚éœ€æ›´æ¢ä¸ºå…¶ä»–APIï¼ˆå¦‚OpenAIï¼‰ï¼š
   - ä¿®æ”¹ AI_API_KEY ä¸ºä½ çš„API Key
   - ä¿®æ”¹ AI_API_URL ä¸ºå¯¹åº”çš„APIç«¯ç‚¹
   - æ ¹æ®éœ€è¦è°ƒæ•´ model å‚æ•°

3. åŠŸèƒ½ç‰¹ç‚¹ï¼š
   - æ”¯æŒä¸­è‹±æ–‡åŒè¯­æŸ¥è¯¢
   - è‡ªåŠ¨è¿›åº¦æ¡åŠ¨ç”»
   - ç»“æ„åŒ–JSONå“åº”è§£æ
   - é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º
   - å“åº”å¼è®¾è®¡

================================================================================
